extends ../../layouts/default.pug
include ../../mixins/alert.pug
block main 
    if(role.permissions.includes("roles_view"))
        +alert_success(5000)
        h2 Nhóm quyền
        //- div #{records}
        div(class="card mb-3")
            div(class="card-header") Danh sách nhóm quyền
            div(class="card-body" style = "padding:0px")
                div(class="row" style = "padding:10px") 
                    div(class="col-3")
                    div(class="col-9 d-flex justify-content-end align-items-center")
                        if(role.permissions.includes("roles_create"))
                            a(href = `${prifixAmin}/roles/create` class = "btn btn-success" ) + Thêm mới
                table(class = "table table-hover" )
                    thead
                        tr
                            
                            th STT 
                            th Nhóm quyền
                            th Mô tả ngắn
                            th Hành động
                    tbody
                        if(records.length > 0)
                            each item , index in records
                                tr   
                                    td #{index + 1}
                                    td #{item.title}
                                    td !{item.description}
                                    
                                    td
                                        if(role.permissions.includes("roles_edit"))

                                            a( class="btn btn-success ml-1 btn-sm" href = `/admin/roles/edit/${item.id}`) Sửa
                                        if(role.permissions.includes("roles_delete"))

                                            button(type="button" class="btn btn-danger ml-1 btn-sm" button-delete-item data-id = item.id) Xóa
                                        a( class="btn btn-primary ml-1 btn-sm" href = `/admin/roles/detail/${item.id}`) Chi tiết
        
                        else 
                            tr 
                                td Chưa có nhóm quyền nào được tạo
        form(action = ""
            method = "POST"
            form-delete-item
            path = "/admin/roles/delete")