extends ../../layouts/default.pug
include ../../mixins/alert.pug
block main 
    if(role.permissions.includes("account_view"))

        +alert_success("5000")
        h2 Danh sách tài khoản 
        div(class="card mb-3")
            div(class="card-header") Danh sách sản phẩm
            div(class="card-body" )
                div(class="row") 
                    div(class="col-3") 
                    div(class="col-9 d-flex justify-content-end align-items-center")
                        if(role.permissions.includes("account_create"))

                            a(href = `${prifixAmin}/account/create` class = "btn btn-success" ) + Thêm mới
            table(class = "table table-hover" )
                    thead
                        tr
                            
                            th STT 
                            th Avatar
                            th Họ tên
                            th Phân quyền 
                            th Email 
                            th Trạng thái 
                            th Hành động
                    tbody
                        if(records.length > 0)
                            each item , index in records
                                tr   
                                    td #{index + 1}
                                    td 
                                        img(src = item.avatar alt = item.fullname)
                                    td #{item.fullname}
                                    td #{item.role.title}
                                    td #{item.email}
                                    td
                                        if(role.permissions.includes("account_edit"))

                                            if(item.status == "active") 
                                                a(class = "badge badge-success" href = "javascript:;" data-id = item.id data-status = item.status button-status) Hoạt động
                                            else 
                                                a(class = "badge badge-danger" href = "javascript:;" data-id = item.id data-status = item.status button-status) Dừng hoạt động
                                    td
                                        if(role.permissions.includes("account_edit"))

                                            a( class="btn btn-success ml-1 btn-sm" href = `/admin/account/edit/${item.id}`) Sửa
                                        if(role.permissions.includes("account_delete"))

                                            button(type="button" class="btn btn-danger ml-1 btn-sm" button-delete-item data-id = item.id) Xóa
                                        a( class="btn btn-primary ml-1 btn-sm" href = `/admin/account/detail/${item.id}`) Chi tiết
                        else 
                            p Chưa có nhóm quyền nào được tạo
                            p Vui lòng tạo nhóm quyền
                                a(href = `${prifixAmin}/roles/create` class = "btn btn-success" ) + Thêm mới nhóm quyền