extends ../../layouts/default.pug
include ../../mixins/alert.pug

block main
    +alert_success("2000")
    .cart-page
        .container.my-5
            .row
                .col-12
                    h3.mb-4.cart-header Trang Đặt Hàng

            .row
                //- --- CỘT TRÁI: DANH SÁCH SẢN PHẨM ---
                .col-md-9
                    .card.cart-card
                        .card-body.p-0
                            table.table.cart-table
                                thead
                                    tr
                                        th.text-center(width="50px") STT
                                        th(width="100px") Hình ảnh
                                        th Tên sản phẩm
                                        th Giá
                                        th Số lượng
                                        th Tổng tiền
                                        
                                tbody
                                    if(cartDetail.products.length > 0)
                                        each item ,index in cartDetail.products
                                            tr
                                                td.text-center.align-middle #{index + 1}
                                                td.align-middle
                                                    .product-img-wrap
                                                        img(src=item.productInfo.thumbnail alt=item.productInfo.title)
                                                td.align-middle #{item.productInfo.title}
                                                td.align-middle
                                                    .price-new #{item.productInfo.priceNew.toLocaleString('vi-VN')} <sup>đ</sup>
                                                td(class="text-center") #{item.quantity}
                                                        
                                                td.align-middle
                                                    span.total-price #{item.totalPrice.toLocaleString('vi-VN')} <sup>đ</sup>
                                                
                                    else 
                                        h3 Không có sản phẩm nào trong giỏ hàng

                                    

                .col-md-3
                    .card.summary-card
                        .card-body
                            h5.card-title.mb-4 Thông tin đơn hàng
                    
                            .d-flex.justify-content-between.mb-2
                                span.text-muted Tạm tính:
                                strong #{cartDetail.totalPrice.toLocaleString('vi-VN')} <sup>đ</sup>
                            
                            

                            hr
                            
                            .d-flex.justify-content-between.mb-4
                                strong.text-dark Tổng cộng:
                                strong.text-danger.fs-4 #{cartDetail.totalPrice.toLocaleString('vi-VN')} <sup>đ</sup>
            .row
                .col-12
                    h3.mb-4.cart-header Thông tin cá nhân
                    form(action = "/checkout/order" method = "POST")
                        div(class="form-group")
                            label(class="label" for = "fullname") Nhập họ tên :
                            input(class="form-control" type = "text" name = "fullname" id = "fullname" required)
                        div(class="form-group")
                            label(class="label" for = "phone") Nhập số điện thoại :
                            input(class="form-control" type = "text" name = "phone" id = "phone" required)
                        div(class="form-group")
                            label(class="label" for = "address") Nhập địa chỉ :
                            input(class="form-control" type = "text" name = "address" id = "address" required)
                        button(class="btn btn-success" type = "submit") Đặt hàng
                            
                            
